<!DOCTYPE html>
<html>

<head>
    <title>Project 2: Find-a-Game by Reese and William</title>
    <link rel="stylesheet" href="Project2.css">
</head>

<body>
    <div class="containter">
        <h1 style="text-align: center;">Find-a-Game</h1>
        <div style="text-align: center;">
            <button type="button" class="btn json" onclick="actionVideoGameInfo()">Action Games</button>
            <button type="button" class="btn json" onclick="casualVideoGameInfo()">Casual Games</button>
            <button type="button" class="btn json" onclick="fightingVideoGameInfo()">Fighting Games</button>
            <button type="button" class="btn json" onclick="racingVideoGameInfo()">Racing Games</button>
            <button type="button" class="btn json" onclick="RPGVideoGameInfo()">RPG Games</button>
            <button type="button" class="btn json" onclick="sportsVideoGameInfo()">Sports Games</button>
        </div>
        <div class="status"></div>
        <!-- <button type="button" class="btn json" onclick="videoGameInfo()">See Games</button> -->
        <div class="gameGenre">
            <!-- Here we will put a h2 element with the genre selected -->
        </div>
        <div class="gameList">
            <!-- Here will be the list of games of that genre -->
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script class="Info">
        // Action Games using jQuery call
        function actionVideoGameInfo() {
            $(".gameList").children().remove();
            $(".status").text("Started!");
            $.getJSON('actionGames.json', function(json) {
                    ProcessInfo(json, "Action Games");
                }).fail(function() {
                    $(".status").text("Error!");
                })
                .always(function() {
                    $(".status").text("Completed!");
                });
        }
        // Casual Games using jQuery call
        function casualVideoGameInfo() {
            $(".gameList").children().remove();
            $(".status").text("Started!");
            $.getJSON('casualGames.json', function(json) {
                    ProcessInfo(json, "Casual Games");
                }).fail(function() {
                    $(".status").text("Error!");
                })
                .always(function() {
                    $(".status").text("Completed!");
                });
        }
        // Fighting Games using jQuery call
        function fightingVideoGameInfo() {
            $(".gameList").children().remove();
            $(".status").text("Started!");
            $.getJSON('fightingGames.json', function(json) {
                    ProcessInfo(json, "Fighting Games");
                }).fail(function() {
                    $(".status").text("Error!");
                })
                .always(function() {
                    $(".status").text("Completed!");
                });
        }
        // Racing Games using AJAX call
        function racingVideoGameInfo() {
            $(".gameList").children().remove();
            $(".status").text("Started!");
            var xhttp = new XMLHttpRequest();
            xhttp.timeout = 3000;
            xhttp.responseType = "json";
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    ProcessInfo(this.response, "Racing Games");
                    $(".status").text("Completed!");
                } else if (this.readyState == 4 && (this.status == 400 || this.status == 500)) {
                    $(".status").text("Error!");
                }
            };
            xhttp.open("GET", "racingGames.json", true);
            xhttp.send();
        }

        // RPG Games using AJAX call
        function RPGVideoGameInfo() {
            $(".gameList").children().remove();
            $(".status").text("Started!");
            var xhttp = new XMLHttpRequest();
            xhttp.timeout = 3000;
            xhttp.responseType = "json";
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    ProcessInfo(this.response, "RPG Games");
                    $(".status").text("Completed!");
                } else if (this.readyState == 4 && (this.status == 400 || this.status == 500)) {
                    $(".status").text("Error!");
                }
            };
            xhttp.open("GET", "RPGGames.json", true);
            xhttp.send();
        }
        // Sports Games using AJAX call
        function sportsVideoGameInfo() {
            $(".gameList").children().remove();
            $(".status").text("Started!");
            var xhttp = new XMLHttpRequest();
            xhttp.timeout = 3000;
            xhttp.responseType = "json";
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    ProcessInfo(this.response, "Sports Games");
                    $(".status").text("Completed!");
                } else if (this.readyState == 4 && (this.status == 400 || this.status == 500)) {
                    $(".status").text("Error!");
                }
            };
            xhttp.open("GET", "sportsGames.json", true);
            xhttp.send();
        }

        // Display Specified Game Genre's Information
        function ProcessInfo(json, genre) {
            $(".gameGenre").html("<h2 style='text-align: center'>" + genre + "<h2>");
            $(".gameList").html("<ul class=gameUl></ul>");
            // Loops through each game and adds 1 point to the review score.
            $.each(json, function(key) {
                var column = ("<table class='gameTable' <tr><td class='leftCol'>Name:</td><td>" + key + "</td></tr>" +
                        "<tr><td>Image:</td><td><img src='" + json[key].image + "' alt='" + key + "' style='width:100px;height:100px;'></td></tr>" +
                        "<tr><td>Release Date:</td><td>" + json[key].releaseDate + "</td></tr>" +
                        "<tr><td>Published by:</td><td>" + json[key].publisher + "</td></tr>" +
                        "<tr><td>Review:</td><td>" + (parseInt(json[key].review) + 1) + "/10</td></tr>" +
                        "<tr><td>Link:</td><td><a href='" + json[key].link + "' target='_blank'>" + key + "</table><br>")
                $(".gameList ul").append(column);
            });
        }
    </script>
</body>

</html>